<div class="technique-view view-page grid spacing-12">
    <div class="row">
        <!-- NAME -->
        <div class="col">
            <h1>{{technique.name}}</h1>
            <app-subheading [config]="config" (onOpenHistory)="openHistory()" (onOpenNotes)="openNotes()"></app-subheading>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- ATT&CK ID -->
            <app-attackid-property class="grow-to-row" [config]="{
                mode: editing? 'edit' : 'view',
                object: technique
            }"></app-attackid-property>
        </div>
        <div class="col">
            <!-- VERSION NUMBER -->
            <app-version-property class="grow-to-row" [config]="{
                mode: editing? 'edit' : 'view',
                object: technique
            }"></app-version-property>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="labelled-box grow-to-row">
                <!-- TYPE -->
                <div class="content">
                    {{technique.isSubtechnique ? "Sub-technique": "Technique"}}
                </div>
                <label>type</label>
            </div>
        </div>
        <div class="col">
            <!-- PLATFORMS -->
            <app-list-property class="grow-to-row" [config]="{
                mode: 'view',
                object: technique,
                field: 'platforms'
            }"></app-list-property>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- DESCRIPTION -->
            <app-descriptive-property [config]="{
                mode: 'view',
                object: technique,
                field: 'description',
                firstParagraphOnly: false, 
                referencesField: technique.external_references,
                label: 'description'
            }"></app-descriptive-property>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- DOMAINS -->
            <app-list-property class="grow-to-row" [config]="{
                mode: 'view',
                object: technique,
                field: 'domains'
            }"></app-list-property>
        </div>
        <div class="col">
            <!-- DOMAIN SPECIFIC FIELDS -->
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- TACTICS -->
            <app-list-property class="grow-to-row" [config]="{
                mode: 'view',
                object: technique,
                field: 'tactics'
            }"></app-list-property>
        </div>
        <div class="col">
            <!-- TACTIC SPECIFIC FIELDS -->
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- DETECTION -->
            <app-descriptive-property [config]="{
                mode: 'view',
                object: technique,
                field: 'detection',
                firstParagraphOnly: false, 
                referencesField: technique.external_references,
                label: 'detection'
            }"></app-descriptive-property>
        </div>
    </div>
    <!-- show relationships if configured to show them -->
    <div *ngIf="config.showRelationships || !config.hasOwnProperty('showRelationships')">
        <!-- SUBTECHNIQUES -->
        <div *ngIf="subtechniques">
            <div class="row">
                <div class="col">
                    <h2 class="section-header">Sub-techniques</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <app-stix-list [config]="{'type': 'relationship', 'stixObjects': subtechniques}"></app-stix-list>
                </div>
            </div>
        </div>
        <!-- MITIGATIONS -->
        <div *ngIf="mitigations">
            <div class="row">
                <div class="col">
                    <h2 class="section-header">Mitigations</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <app-stix-list [config]="{'type': 'relationship', 'stixObjects': mitigations}"></app-stix-list>
                </div>
            </div>
        </div>
        <!-- GROUPS -->
        <div *ngIf="groups">
            <div class="row">
                <div class="col">
                    <h2 class="section-header">Associated Groups</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <app-stix-list [config]="{'type': 'relationship', 'stixObjects': groups}"></app-stix-list>
                </div>
            </div>
        </div>
        <!-- SOFTWARE -->
        <div *ngIf="software">
            <div class="row">
                <div class="col">
                    <h2 class="section-header">Associated Software</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <app-stix-list [config]="{'type': 'relationship', 'stixObjects': software}"></app-stix-list>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <h2 class="section-header">References</h2>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- EXTERNAL REFERENCES -->
            <!-- <app-external-references-property [config]="{
                mode: 'view',
                object: technique,
                referencesField: technique.external_references
            }"></app-external-references-property> -->
        </div>
    </div>
</div>