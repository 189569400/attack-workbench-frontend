<div class="collection-import import-workflow">
    <mat-vertical-stepper linear>
        <mat-step label="specify collection">
            <div *ngIf="!loading_preview else loadingPreview">
                <mat-form-field class="url fullwidth" appearance="outline">
                    <mat-label>specify a URL</mat-label>
                    <input matInput [(ngModel)]="url" (keyup.enter)="url.length > 0 ? previewCollection() : null">
                    <mat-icon matSuffix>cloud_download</mat-icon>
                </mat-form-field>
                <div class="action-bar">
                    <button mat-raised-button color="primary" (click)="previewCollection()" *ngIf="url.length > 0">
                        <span class="text-label">preview</span>
                    </button>
                </div>
            </div>
            <ng-template #loadingPreview>
                <app-loading-overlay></app-loading-overlay>
            </ng-template>
        </mat-step>
        <mat-step label="review contents">
            <p>
                Review the contents of the collection. Deselect objects you don't want to import. Objects which have no changes compared to your local knowledge base such as those previously imported are not displayed.
            </p>
            <app-collection-import-summary [config]="{
                'object_import_categories': object_import_categories,
                'select': select
            }"></app-collection-import-summary>
            <div *ngIf="select" class="center">
                <p class="text-deemphasis">
                    Importing {{select.selected.length}}/{{changed_ids.length}} objects
                </p>
                <div class="action-bar nomargin">
                    <button mat-stroked-button (click)="selectAll()">select all</button>
                    <button mat-stroked-button (click)="deselectAll()">deselect all</button>
                </div>
                <div class="action-bar">
                    <button mat-mini-fab class="extended-fab-button"  color="primary">
                        <mat-icon aria-label="add">save_alt</mat-icon>
                        <span class="text-label">Import</span>
                    </button>
                </div>
            </div>
            <!-- <ul *ngIf="select">
                <li>
                    Total objects queued for import: {{select.selected.length}}/{{changed_ids.length}}
                </li>
                <li>
                    Total objects that already exist in your knowledge base: {{unchanged_ids.length}}
                </li>
            </ul> -->
            <p>
            </p>

        </mat-step>
        <mat-step label="import">
            TODO import button
        </mat-step>
    </mat-vertical-stepper>
</div>