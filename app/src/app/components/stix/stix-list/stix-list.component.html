<div class="stix-list">
    <!-- list controls -->
    <div class="controls">
        <div class="input-group">
            <mat-form-field class="search" appearance="outline">
                <mat-label>search</mat-label>
                <input matInput [(ngModel)]="query">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>filters</mat-label>
                <mat-select multiple [(ngModel)]="filter">
                    <mat-optgroup *ngFor="let group of filterOptions" [label]="group.name" [disabled]="group.disabled">
                        <mat-option *ngFor="let filter of group.values" [value]="filter.value">{{filter.label}}</mat-option>
                    </mat-optgroup>
                </mat-select>
            </mat-form-field>

            <!-- <mat-form-field appearance="outline">
                <mat-label>view mode</mat-label>
                <mat-select [(ngModel)]="mode">
                    <mat-option value="table">table</mat-option>
                    <mat-option value="cards">cards</mat-option>
                </mat-select>
            </mat-form-field> -->
        </div>
    </div>


    <div class="table-container" *ngIf="stixObjects.length > 0">
        <table mat-table multiTemplateDataRows matSort
               [dataSource]="stixObjects" >
            <!-- header -->
            <ng-container matColumnDef="{{column}}" *ngFor="let column of tableColumns">
                <th mat-header-cell mat-sort-header *matHeaderCellDef> {{column}} </th>
                <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
            </ng-container>

            <!-- expanded content column -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="tableColumns.length">
                    <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                        <div class="element-description">
                            {{element.description}}
                        </div>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
            <tr mat-row *matRowDef="let element; columns: tableColumns;"
                class="element-row"
                [class.expanded]="expandedElement === element"
                (click)="expandedElement = expandedElement === element ? null : element">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>

        </table>
        <mat-paginator [length]="resultsLength" [pageSize]="30"></mat-paginator>
    </div>
</div>
